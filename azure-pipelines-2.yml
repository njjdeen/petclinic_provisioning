trigger:
- 'main'

pool:
  name: 'VM-agent'

steps:


#- task: AzureCLI@2
 # displayName: 'Azure CLI'
  ## azureSubscription: '$(SUBSCRIPTION_NAME)'
   # addSpnToEnvironment: true
   # scriptType: 'bash'
   # scriptLocation: 'inlineScript'
   # inlineScript: |
    #  echo "##vso[task.setvariable variable=ARM_SUBSCRIPTION_ID]$(az account show --query="id" -o tsv)"
     # echo "##vso[task.setvariable variable=ARM_CLIENT_ID]${servicePrincipalId}"
      #echo "##vso[task.setvariable variable=ARM_CLIENT_SECRET]${servicePrincipalKey}"
      #echo "##vso[task.setvariable variable=ARM_TENANT_ID]${tenantId}"
      


- task: Bash@3
  inputs:
    targetType: inline
    script: echo $(SERVICE_PRINCIPAL_USER) && echo $(SERVICE_PRINCIPAL_PASSWD) && echo $(SERVICE_PRINCIPAL_TENANT)
      
- task: Bash@3
  inputs:
    targetType: inline
    script:  az login --service-principal -u ${SERVICE_PRINCIPAL_USER} -p ${SERVICE_PRINCIPAL_PASSWD} --tenant ${SERVICE_PRINCIPAL_TENANT}
    
